Bienvenido a su VPC. Puede pensar en ella como una fortaleza endurecida en la que nada entra o sale sin permiso explícito. Tiene una puerta de enlace en la VPC que sólo permite el tráfico que entra o sale de la VPC.
 Pero eso sólo cubre el perímetro. Y ésa es sólo una parte de la seguridad de la red en la que debería centrarse como parte de su estrategia de TI. aws dispone de una amplia gama de herramientas que cubren todas las
  capas de la seguridad, el endurecimiento de la red la seguridad de las aplicaciones, la identidad de los usuarios, la autenticación y la autorización. la prevención de la denegación de servicio distribuida o DDoS,
   la integridad de los datos, el cifrado, y mucho más. Vamos a hablar de algunas de estas piezas clave. Si realmente quiere saber más sobre seguridad, siga los enlaces de esta página para que le dirijan a más 
   información. Y formación adicional sobre cómo bloquear su infraestructura más que la receta secreta de tarta de limón de la tía Robin. Y que nadie consiga esa receta. Hoy, quiero hablar de algunos aspectos del
    endurecimiento de la red, mirando a lo que ocurre dentro de la VPC. Ahora, la única razón técnica para utilizar subredes en una VPC, es controlar el acceso a las puertas de enlace. Las subredes públicas tienen
 acceso a la puerta de enlace de Internet, las subredes privadas no. Pero las subredes también pueden controlar los permisos de tráfico. Los paquetes son mensajes de Internet, y cada paquete que cruza los límites de la subred, se comprueba con algo llamado lista de control de acceso a la red o ACL de red. Esta comprobación es para ver si el paquete tiene permisos para salir o entrar en la subred, basándose en quién lo envió y
  cómo está intentando comunicarse. Puede pensar en las ACL de red como si fueran oficiales de control de pasaportes. Si está en la lista de aprobados, pasa, si no está en la lista, o si está explícitamente en la 
  lista de no entrar, entonces le bloquean. Las ACL de red comprueban el tráfico que entra y sale de una subred, igual que el control de pasaportes. La lista se comprueba al entrar en un país y al salir. Y sólo 
  porque le dejen entrar, no significa necesariamente que le vayan a dejar salir. El tráfico aprobado puede seguir su camino, y el tráfico potencialmente dañino intenta hacerse con el control del sistema a través de
   peticiones administrativas. Se bloquean antes de que lleguen a tocar su objetivo. No se puede hackear lo que no se puede tocar. Ahora bien, esto parece una gran seguridad. Pero no responde a todos los problemas 
   de control de la red. Porque una ACL de red sólo llega a evaluar un paquete si cruza un límite de subred, dentro o fuera. No evalúa si un paquete puede llegar a una Instancia EC2 específica o no. A veces tendrá 
   varias Instancias EC2 en la misma subred. Pero pueden tener reglas diferentes sobre quién puede enviar los mensajes, a qué puerto se permite enviar esos mensajes. Así que también necesita seguridad de red a nivel 
   de instancia. Para resolver las cuestiones de acceso a nivel de instancia, introducimos los Grupos de Seguridad. Cada Instancia EC2, cuando se lanza automáticamente viene el Grupo de Seguridad. Por defecto, el 
   Grupo de Seguridad no permite ningún tráfico en la instancia en absoluto. Todos los puertos están bloqueados, todas las direcciones IP que envían paquetes están bloqueadas. Eso es muy seguro pero quizás no muy 
   útil, si quiere que una instancia acepte realmente tráfico del exterior digamos, un mensaje de un amigo e instancia o un mensaje de internet. Así que, obviamente, puede modificar el Grupo de Seguridad para 
   aceptar un tipo específico de tráfico. En el caso de un sitio web, usted quiere que se acepte tráfico basado en web o HTTPS. Pero no otros tipos de tráfico digamos, un sistema operativo o peticiones de 
   administración. Si los narcos son el control de pasaportes, un grupo de seguridad es como el portero de su edificio, siendo el edificio la Instancia EC2 en este caso. El portero comprobará una lista para 
   asegurarse de que se permite a alguien entrar en el edificio, pero no se molestará en comprobar la lista a la salida. Con los Grupos de Seguridad, usted permite la entrada de tráfico específico, y por defecto, se
    permite la salida de todo el tráfico. Ahora, espere un minuto Blaine, usted acaba de describir dos motores diferentes cada uno haciendo exactamente el mismo trabajo. Dejar entrar los paquetes buenos, mantener 
        los paquetes malos fuera. La diferencia clave entre un Grupo de Seguridad y una ACL de Red es que el Grupo de Seguridad es con estado. Lo que significa, como hemos hablado, que tiene algún tipo de memoria cuando
     se trata de a quién permitir entrar o salir. Y la ACL de Red no tiene estado, no recuerda nada. Y comprueba cada paquete que cruza su frontera, independientemente de cualquier circunstancia. Es importante 
     entender esta metáfora. Así que quiero ilustrar el viaje de ida y vuelta de un paquete mientras va de una instancia a otra instancia en una subred diferente. Ahora bien, esta gestión del tráfico, no se preocupa 
     del contenido del paquete en sí. De hecho, ni siquiera abre el sobre, no puede. Todo lo que puede hacer, es comprobar si el remitente está en la lista aprobada. Muy bien, empecemos con la Instancia A, queremos 
     enviar un paquete desde la Instancia A a Instancia B en una subred diferente, misma VPC, subredes diferentes. Así que la Instancia A envía un paquete. Ahora lo primero que ocurre, es que ese paquete se 
     encuentra con el límite del Grupo de Seguridad de la Instancia A. Por defecto, todo el tráfico saliente está permitido desde un Grupo de Seguridad, así que puede pasar por el portero y salir. Genial, correcto, 
     el paquete ha conseguido pasar el Grupo de Seguridad de la Instancia A. Ahora tiene que salir del límite de la subred. En el límite, ahora debe pasar por el control de pasaportes, la ACL de red. A la ACL de red 
     no le importa lo que haya permitido el grupo de seguridad. Tiene su propia lista de quién puede pasar y quién no. Si la dirección de destino está permitida, puede seguir su viaje, que lo está. Así que, ahora 
     hemos salido de la subred original, y ahora el paquete va a la subred de destino de donde sale la Instancia B. Ahora en esta subred de destino, una vez más, tenemos control de pasaportes. Sólo porque al paquete 
     se le permitió salir de su país de origen, no significa que pueda entrar en el país o subred de destino en este caso. Ambos tienen oficiales de pasaportes únicos con sus propias listas de control. Tiene que ser 
     aprobado en ambas listas, o podría ser rechazado en la frontera. Bien, resulta que el paquete está en la lista de aprobados para esta subred, así que se le permite entrar a través de la ACL de red en la subred. 
     Casi hemos llegado, ahora nos acercamos a la instancia de destino, la Instancia B. Cada Instancia EC2 tiene su propio Grupo de Seguridad. Si quiere entrar en esta instancia, el portero tendrá que comprobar si 
     tiene permiso para entrar, y nosotros estamos en la lista. El paquete ha llegado a la instancia de destino. Una vez completada la transacción, ahora sólo queda volver a casa. Es el patrón de tráfico devuelto. 
     Es el más interesante, porque aquí es donde la naturaleza stateful versus stateless de los diferentes motores entra en juego, porque el paquete todavía tiene que ser evaluado en cada punto de comprobación. Los 
     Grupos de Seguridad por defecto, permiten todo el tráfico de retorno. Así que no tienen que comprobar una lista para ver si se les permite salir. En su lugar, permiten automáticamente el paso del tráfico de 
     retorno pase lo que pase. Control de paso aquí en el límite de la subred, estas ACL de red no recuerdan el estado. No les importa que el paquete haya entrado aquí. Puede que esté en una lista de no puede salir. 
     Cada entrada y salida se comprueba con la lista apropiada. La dirección de retorno del paquete tiene que estar en su lista aprobada para conseguir cruzar la frontera, llegar a la frontera de la subred de 
     origen. Pero aquí también tenemos que negociar el pasaporte de control de ACL de red. Controles sin estado significa que siempre comprueba su lista. El paquete ha pasado la ACL de red a nivel de subred, lo que 
     significa que el paquete ahora ha conseguido volver a la Instancia A, pero el grupo de seguridad, el portero sigue al mando aquí. La diferencia clave, sin embargo, es que los Grupos de Seguridad son stateful. 
     El Grupo de Seguridad reconoce el paquete de antes, así que no necesita comprobar si está permitido entrar. Vuelve a casa. Ahora bien, esto puede parecer que hemos gastado mucho esfuerzo sólo en llevar un 
     paquete de una instancia a otra y viceversa. Puede que le preocupe toda la sobrecarga de red que esto puede generar. La realidad es que todos estos intercambios ocurren instantáneamente como parte de cómo 
     funcionan realmente las redes de AWS. Si quiere conocer la tecnología que hace todo eso posible, pues entonces necesita apuntarse a un conjunto de formaciones completamente diferente. Una buena seguridad de red 
     aprovechará tanto las ACL de red como los grupos de seguridad porque la seguridad y la profundidad son críticas para las arquitecturas modernas.